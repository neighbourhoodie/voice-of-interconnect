language: node_js
node_js:
- '6'
sudo: required
script: npm test
env:
  global:
  - CF_STAGING_DOMAIN=mybluemix.net
  - CF_STAGING_APP=voice-of-interconnect-staging
  - CF_STAGING_API=https://api.ng.bluemix.net
  - secure: "TR0TTNtgc0cqsAIPfRHyBoXiVSv2Fegbjtmk2TPhwCgzh+3U9ieYE7F2QhDE25R4lYyYEViqzFynzlGy2j3+OCue8cUplH/pHjHbdzISMsCWSPqmSiJNgatXYlBpkncc2a6XJGHxxhTcglWC9RVe9ISWbuXGIR8+EZzhPr+f9WnNFYTqsaUNt5rsHEdWtITxY1M0vUnOVwz1TSczYxuz7/8zI/UdBAHC7l1Nsm1fVdfP7Ryb4ZcBXVa4f+YiWcDu2/H0mfF2JJJPC4uNadMkuWT1piJnrsLwL56kFWPEdxQNTHUMelsvl/4ZEttFfNXwdYS80rMGFBxxse9vTON5F8KD5VlhQJ8OoSF7mG7YStxulX/Dpzb5oENTwAx1VnLJ4FZVGX6MWuvQVUg7W2VwrYH+lK48s3tPn4UnNgSiGdjA4sanippSpT1gB82iXQSC9+5behINCc1nW7GhaC+56T5gdANS9GqwRaZstaaappMpvDyhstoZBWRskv16qoOQA7kprBeUlcpxdnmE2qPBSjIcGQmwFNKifG9ZsEpVZJyTJa44jFQ3y/QPn5hFz9Uq6+7EMqrrYIqvBzNd68vfNoCxYh/Xf/RLfUUfB+Z9cQoo3+6ihUyy5uHWGiH2F9QDkW1A4nuPCJCpb28FM2vFcfVO0Sb6OdiWE+mLLcn5UuM="
  - secure: "RZBqkyBzTaGi1jrEbSxcpe2zxeF0u9Q6mMcQXNiLZoNMVMhcL6GA/tDwNWsJmMOo7auFWiSrODg7kmjRO+9sWJqolkyhWSoS8T+pdFAufyeeSNU/G+qR6fCTSXCKTmRukjAstsD+aLfXbeJnMawApd3t1Z2z+Xst8wnxEAwpnwu6ZhXrk3OnwMN+U/BuDDh3RLKrK9RGO4amhewuC7n9lNi4V36trlAODgXNnROzuy0gHaSkICWZAAAiVoKcfSK+6fqOjDnEZ9T3Ha0F8KKW1JiP4DRpj5RS1JlqKxl3pNT481FcJ/zONFVdaeW4OseEDfTEuJyQ0HzH0TFo1O4mMGgS5KbfkhJEcBWpjo7RdWHSoEcjOH5AAPWAtLH1S+3tzUATIYLcc3S/pvAhi0p/38B8GnQ/eJvHvtsex+f5ydlBWc0Leox8rtmJXQJcyocQut5A9tfBYygz79/8V5i5fpuWUtO1TBmfkThA7hXNAHTHd6xAA8GQjfE3RDZ8oJsZQXRFKkXvoVSdrHU29jJ4iRFbFVvaWtjx0xTunZzFTD2FGc5vtSwN2Mkt4CsI66uAWlcHLADkeatRncGkdgz/KbDuRSuzBTy+QYHEwu3YCBEQGQJh+1cCbvJgelAiz748jPqIqYo6s/APqd9ucDlMOcN4wMQonw403vBjrewe9aU="
  - secure: "hyeetGqN1/cxzEV2tTXgqat6KacJA3uRWYp7v45hbdkIirSP//7iP/63FvipkAlEl4wxLu7U4n0JfPnk+V0V2G5c1+aycZF8l2Fp4kK6e1RTvvSgWybomPK6cSjhl03jAs0n3IgLH2RViHPdZ8xic2XD9SBgwG14ZfcWzI19b1t2Maj2kELRJQqxiYnyyR0aXB6QM6mIGIiAhFwIMaKd++yu7ZJh5PZM7xUQ+Hm09oGdI/SHuh2lpPRJmjVMDqPNSKw4giWuz7j74K+efmpAGxN11xACSZIkIP6yfUvxD1tzfOyZa5Eo572vIZD0ZnITSlENX4eYQwRZzI9xZukfOcid339h4jbNBhWK1olgCPwiTobRwO7dpmrVPEDqzsY592vY+dXPrL/D/C8C9BQ7vC3fBPePPvOt4/M+2sa/ij/8021tiZ3CzhBEmooIx3HHgXgFpsrcwxd/FJH9h8z+GSAQeFyHPoe9CX3vaBUXpfBfDk+RgGlwsa1B/6LIBJM+jguPys+b69DWc/ie4qYdv32maAdkC2HemzlrEK9kIzopgYaGP4WnFLKK7FadKrPYvAI7l+qLRa0ONq/xX/BUYgqz4S9Y809bmnQusM6njZfrlOdsdEAaaeLd7n4qiPL7Qs28Rk2aTVXjxcqSjV5H9PQtfa+n/uXTwV5z20DvOKQ="
  - secure: "ITjkE5iNkGzQrBhuNR58HZwfpHH5FBzfGWwm/BLKH9rgBb9rQzeDRk8WJLK/GjxK1iAo9nT+NjI6gRQFmBhQE51/p49ylYzjuZ83HItmfHq8jzEJ/9weLwp6gpaZyu8wo47XrkRg32nWypNLMdFPCn+F1n2CBP0nO/uc1hb/2U8BFp8/rUYKyShdKgfupWUyPmKLUfom3jfgjabOBJskjB3TMKnDw6vfxQykKmkCLS8MvKSqWobOJfJpd4Rq6gWjSvVzEFFQ2pHy5I1AJEJ/fu347RgQp94QMsh278jwOZqi8v1h2/y06eprWPasztqb2QNNdtcADQWxG7XN1myaZZdKPDfui+CtYPE+UPs0m2ktClq3zqaQae4pso+5ZwgM5sf2Qf5lYA/HZBtEXKc16X9EnzBC67WzY+S6effaU8wuiAhi6gPUiIBydaLbU2mTJueUNpdL0y62ftzcxMgtVqbHuMIxS6WDQDrEQNHe38/iuLBiRnssC2V8LjftYehnZB1fTxpT2YBysJpZlCxrA03Dz57dD8kXGnFwvWn9aZZZKNtpTdGCtb7YkvZOP1/14W7G+6R7ebyQIGj8Bwgu/YW2tXNjwHpx8srI5DvTRuH5ikMTRr/qDI9Y8cOLVhFJsfoGqSgE5PDalPoeL7qMvq65ShfLjx4ytdEtRAOUMyE="
  - CF_PROD_DOMAIN=mybluemix.net
  - CF_PROD_API=https://api.ng.bluemix.net
  - CF_PROD_APP=voice-of-interconnect
  - secure: "m420o06Z9FGDZ0EBUGmdUg6HyZErZTFTkw7Ke3KTAHG0KxBf1kC+fQYHifcTkLebDgWHeLbiYg8XQkxZ9WVkU8/Cca+b59n1ZFZ54GMuJeA94L4mQNz04YwaVJki76HSzjUk9yrhwGnxJTfN3T1EWsO6I7/b7CThLiE9H453MUUhRBS0mKbFllN+2PAlDvAybPLqcMtjrYLFmn9i3VheIw9vciBxXVOxk8xgBweYezmaFH7y8QqeRr0WoRiMOxXt62LtD8rd4V39b2611BzzxKxfiFuObJsS6FyZ9kiC25PheuspJ1CS9Rsi+kfd+CaSCUbjzfOMmHgyTx7x9PYLNA5ZcXFe8sOec5HtdYDIuLt9A3FtQTdD2XKjN5vVCOPwyUgMDU+dbFWoNcni82cJ1IrRxcg3tnkYJ+iyZqMpi3Ftr9UcormnRAjYSOKyvi4BbVygw8UpBbN/7uTo+3HDBv2UPELSOPt7+hrphZTwux5KEKss1DNQfB9fkxoz810745cMVQO9CXZRAwzloSuavx6HwUoWATYmBz5FegUbO07myaLTwXmjf74l1ErYcfiErqN+DhA19u3d9iEB21eXA91TrIz9ZrB+LGSW736wXcFH2r8iHbum75IVzFR3DUUYiEx7iuqZC7bGB2nuqGEAScRI/SuKCImSRKvAmNvpXxw="
  - secure: "u36ppLT4IJG+h3si02vPQuG8/EDyoQ1erD5T0ctWWKDjeGuLC5UFYJV9c2CHtvjB5vdPy/jl1zMCjcvEMnI5xwyAQRyYyg3gIPFc8l5v3EbmLfYSMkrjU6aKYG3w+orYsSZM5CYWpnr3R+CtCHBRs+iFRmBFeoqgKE5seu0lwbwCZbFk+pSraPgFAOETiZf1HAz12rsPoRNhkLXOmIO0WnXU2j6ikBgYe0uX3SenlQ9yT9nlxYAT3BU8SYc1H0f91Z4fb1l8yaU5Wh33hjTRVjXSPItmieC+jhqEd4klmntIjF1dBxiNrl6TxlKneKDRPSZbYbo6B08aTMyJXJC/VVOwYulHB/U/FsLsuBZQj2eeXUHaHww4p93SclObiH9ME2qHgoKNmrT1uIrzI6JuztAat1iT92kjr983N38c7KYx3eAyO+ZR4R1NBQaJLNwP/1oqIqIp79m6oQxMJ01Mt0bZgYS4pS+nHe5kRcABOdJWEX+hvMlBtQaK4fJ+UITs7wQMkZl2RXhWWqNL6Cb0c+KW3Qync/GB4GdNBDWA8EgoYFsJEGnHgjsAp4zBuAQw/qj5QQEhuw5yrjVVest9u2oe8XPOVxR4WjDsEZpFi559OTIfbHOIBPgfJMBhJ7whdJk7EfCyineFSXfRB28+EGvwQIHNk9aS9jqus8rjDiY="
  - secure: "swigtGTLI1LVwbOyT9Ppdku1vXGd+TCtTvtoXnIyNDA1JpcNT5DJxZjB+xSQ5Fy3+1QYFZH4rgwaK8AJ80Gbc6doHXOrnnZp2G7TRUqL0pe5rFOmbsxleMqe1tvrCEfJ/phDLqXyET8ahJhlNzrpX9h+zLuWLRCubSObVeOtR+XMx6OOgVJPchPTf5ALvBxJkRsOOwr4Wi55r6tkmH6/JrtsOIvCd0W+6gWavCcoG8iOdIsNDSJ6c4Pj9atK8OMG1lJt+fNLzOxUV+rxQ05QPXDJNd7Cx+rJVKNdRHe+GOc/GUDzDJBsy0SLyCLvCE2gkn3hNQIZrLfTLJcP7F/LMVo6bMR2lWNNVLihJYsbUa0nfyrZEflMX7/pBJTK3dyLb6fr3wihVEFtzJXV0M8Zj9eO0KKcBT3iNI3vv4WweK2eEZB1Z4V4A7eAWW2YfmEWvRv8qqeXgyHv29idrz7dwDZ6EFDErvBk0BMzBmhzOYcRQ/dUxPl/b+7ceLEHV0Q2cPPR+87kTN2BKk+w7sroXuMkSq1TeojBl00o1SBgcqr53SQmdNVZpcS1716yY/ESx32buWrZxDAk14F7AvuHgtrpLMXrzWM/vbzCOTOBBI0tgvMqao6ZkdY6yFzlqZ+eeoThNwOPU3s2nTFXk6ytq3NyRliiSVdhZFRhP4ESJjs="
  - secure: "fxeWFQO7yrFcfNbH0487jfocgm6W1SoxCzadfuMNcHyaybXs8I/Thwk6bbSNjSS851Sqo7WSqmOK7Q80L73MEF28Q2fOPonXSMly1xBAaqVZeqYnr5tNxVgO9wmRePnpAuqFk9uXPg9TjPyu7Yga2VR6YYoLGJ7ScpuxuCzr9NoCxd/Tr8pq4JK+mL5Mep9mJK0NigR6fQLP/AZ1AgPu3ABR9KhBTGH0bWz4TJhxXNiMKO09HRIUc6g6+zL2Pa/VaciFohTDvaDInBqwze30usGGBgF4khlPORdA6De8oNao0Vmt02ZyOi9QA6D/hjEjfcHIh6IN5KBn+ircnrg4VWSI8vXDxBfJoKNoAlIO8CwaR4paB2/PRPNl19gO/ziK9rWhvNIYdYrsXWVUWmTCkAxRoFvDKvLzbWnnTUKfnaovZU2cHsBKECMdQH1MCjOavQiYPPW70ubLWkhXjGEcxPAvTXclcuj3suBVEuYVQDgqN/Gwno/T4qw93dhNd66nogHjWpCZDE4kL4AA0eSCvboNJzej0COGaYWNJ/uriSmyC0b4aA1X9zDZsxEAw4RsSc3ABDrgj5ec3jgiaIZ8Bzdc934tJ+Xc2Z8QS4xJrmgHHLEHtTq+zaMlDE9tUezTxJ0dFQAJJBW7QRnIZvL3OBFa8tIzYXD7idBOo4TY4vY="
before_deploy: npm run build
deploy:
  - provider: script
    script: deploy/cf-blue-green-staging.sh
    skip_cleanup: true
    on:
      repo: neighbourhoodie/voice-of-interconnect
      branch: master
  - provider: script
    script: deploy/cf-blue-green-prod.sh
    skip_cleanup: true
    on:
      repo: neighbourhoodie/voice-of-interconnect
      branch: live